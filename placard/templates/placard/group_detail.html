{% extends "main.html" %}


{% block title %}{{ group }} detail | Groups{% endblock %}


{% block extrastyle %}
{% load admin_static %}
<link rel="stylesheet" type="text/css" href="{% static "css/forms.css" %}" />
{% endblock %}


{% block breadcrumbs %}
<div class="breadcrumbs">
<a href='{{ base_url|default:"/" }}'>Home</a>
 &rsaquo; <a href="{% url plac_grp_list %}">Groups</a>
{% if slave_id %}
 &rsaquo; <a href="{% url plac_grp_detail group.pk %}">{{ group }} detail</a>
 &rsaquo; {{ slave_name }}
{% else %}
 &rsaquo; {{ group }} detail
{% endif %}
</div>
{% endblock %}


{% block object-tools %}
<div class="module object-tools">
    <h2>Group links</h2>
    <ul>
        {% if slave_id %}
        <li><a href="{% url plac_grp_detail_verbose group.pk slave_id %}">Verbose output</a></li>
        {% else %}
        <li><a href="{% url plac_grp_detail_verbose group.pk %}">Verbose output</a></li>
        {% endif %}
        {% block object-tools-view %}{% endblock %}
        {% if perms.placard.change_group %}
        <li><a href="{% url plac_grp_edit group.pk %}">Edit details</a></li>
        {% endif %}
        {% if perms.placard.rename_group %}
        <li><a href="{% url plac_grp_rename group.pk %}">Rename Group</a></li>
        {% endif %}
        {% if perms.placard.email_group %}
        <li><a href="{% url plac_group_email group.pk %}">Sends members an Email</a></li>
        {% endif %}
        {% if all_slave_names %}
        <li>source:
        <a href="{% url plac_grp_detail group.pk %}">master</a>, {% for slave_id, slave_name in all_slave_names.items %}<a href="{% url plac_grp_detail group.pk slave_id %}">{{ slave_name }}</a>{% if not forloop.last %}, {% endif %}{% endfor %}
        </li>
        {% endif %}
    </ul>
</div>
{% endblock %}


{% block content %}
<div id="content-main">

    <div class="module">
        <h2>Group {{ group }} detail</h2>

        <h3>{{ group }}</h3>
        <table>
            <tr>
            <td>cn</td><td>{{ group.cn }}</td>
            </tr>
            <tr>
            <td>description</td><td>{{ group.description }}</td>
            </tr>
            <tr>
            <td>displayName</td><td>{{ group.displayName }}</td>
            </tr>
            <tr>
            <td>gidNumber</td><td>{{ group.gidNumber }}</td>
            </tr>
            <tr>
            <td>objectClass</td><td>{{ group.objectClass }}</td>
            </tr>
            <tr>
            <td>sambaGroupType</td><td>{{ group.sambaGroupType }}</td>
            </tr>
            <tr>
            <td>sambaSID</td><td>{{ group.sambaSID }}</td>
            </tr>
        </table>
        <table>
            <tr>
                <th>Primary Users</th>
            </tr>
            {% for m in group.primary_accounts.all %}
                <tr class="{% cycle row1,row2 %} {% if m.is_locked %}locked{% endif %}">
                    <td><a href="{% url plac_user_detail m.pk %}" >{{ m }}</a></td>
                </tr>
            {% endfor %}
            <tr>
                <th>Secondary Users</th>
            </tr>
            {% for m in group.secondary_accounts.all %}
                <tr class="{% cycle row1,row2 %}">
                    <td class="{% if m.is_locked %}locked{% endif %}"><a href="{% url plac_user_detail m.pk %}" >{{ m }}</a></td>
                    {% if perms.placard.change_group %}
                    <td><a href="{% url plac_grp_rm_member group.pk m.pk %}" class="deletelink">Remove</a></td>
                    {% endif %}
                </tr>
            {% endfor %}
        </table>
        {% if perms.placard.change_group %}
            <form method="post" action="{% url plac_grp_add_member group.pk %}" class="simple">{% csrf_token %}
                <fieldset>
                    {{ form }}<input type="submit" value="Add" class="default" />
                </fieldset>
            </form>
        {% endif %}
    </div>
</div>
{% endblock %}
